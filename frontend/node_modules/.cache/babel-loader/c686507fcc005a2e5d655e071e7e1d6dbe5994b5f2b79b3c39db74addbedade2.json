{"ast":null,"code":"var _jsxFileName = \"/Users/daryn/Desktop/Project/Kanat_CRM/NEW_Kanat_Shops/frontend/src/Container/Login/Login.tsx\",\n  _s = $RefreshSig$();\nimport { useSignInMutation } from '../../Store/services/auth';\nimport FormElement from '../../Components/UI/Form/FormElement';\nimport { useAppSelector } from '../../Store/hooks';\nimport { getUser } from '../../Store/user/userSelectors';\nimport React, { useEffect, useState } from 'react';\nimport { Container, Typography, Grid, Box, Snackbar } from '@mui/material';\nimport { useNavigate } from 'react-router-dom';\nimport { LoadingButton } from '@mui/lab';\nimport MuiAlert from '@mui/material/Alert';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Alert = /*#__PURE__*/React.forwardRef(_c = function Alert(props, ref) {\n  return /*#__PURE__*/_jsxDEV(MuiAlert, {\n    elevation: 6,\n    ref: ref,\n    variant: \"filled\",\n    ...props\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 28,\n    columnNumber: 10\n  }, this);\n});\n_c2 = Alert;\nconst Login = () => {\n  _s();\n  var _data;\n  const [form, setForm] = useState({\n    username: '',\n    password: ''\n  });\n  const user = useAppSelector(getUser);\n  const [signIn, {\n    isError,\n    error\n  }] = useSignInMutation();\n  const [open, setOpen] = useState(false);\n  const navigate = useNavigate();\n  useEffect(() => {\n    setOpen(isError);\n  }, [isError]);\n  const handleClose = () => {\n    setOpen(false);\n  };\n  const inputChangeHandler = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setForm(prevState => ({\n      ...prevState,\n      [name]: value\n    }));\n  };\n  const submitFormHandler = async e => {\n    e.preventDefault();\n    const data = await signIn(form);\n    if (!data.error) {\n      setForm({\n        username: '',\n        password: ''\n      });\n      navigate('/');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    component: \"section\",\n    maxWidth: \"xs\",\n    children: [/*#__PURE__*/_jsxDEV(Snackbar, {\n      anchorOrigin: {\n        vertical: 'top',\n        horizontal: 'center'\n      },\n      open: open,\n      autoHideDuration: 3000,\n      onClose: handleClose,\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        onClose: handleClose,\n        severity: \"error\",\n        sx: {\n          width: '100%'\n        },\n        children: (error === null || error === void 0 ? void 0 : (_data = error.data) === null || _data === void 0 ? void 0 : _data.message) === 'Username not found!' ? 'Логин не верный!' : 'Пароль не верный!'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        component: \"h1\",\n        variant: \"h5\",\n        textAlign: 'center',\n        sx: {\n          marginTop: 1,\n          marginBottom: 1\n        },\n        children: \"\\u0412\\u043E\\u0439\\u0442\\u0438\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: submitFormHandler,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            spacing: 2,\n            children: [/*#__PURE__*/_jsxDEV(FormElement, {\n              required: true,\n              value: form.username,\n              onChange: inputChangeHandler,\n              name: \"username\",\n              label: \"\\u0418\\u043C\\u044F \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(FormElement, {\n              required: true,\n              value: form.password,\n              onChange: inputChangeHandler,\n              type: \"password\",\n              name: \"password\",\n              label: \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(LoadingButton, {\n            type: \"submit\",\n            fullWidth: true,\n            variant: \"contained\",\n            color: \"primary\",\n            loading: user.isLoading,\n            disabled: form.username.length > 0 && form.password.length > 0 ? false : true,\n            children: \"\\u0412\\u043E\\u0439\\u0442\\u0438\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            container: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n};\n_s(Login, \"tEWU9Xy7KiXc6zb9uD8h042NVxc=\", false, function () {\n  return [useAppSelector, useSignInMutation, useNavigate];\n});\n_c3 = Login;\nexport default Login;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"Alert$React.forwardRef\");\n$RefreshReg$(_c2, \"Alert\");\n$RefreshReg$(_c3, \"Login\");","map":{"version":3,"names":["useSignInMutation","FormElement","useAppSelector","getUser","React","useEffect","useState","Container","Typography","Grid","Box","Snackbar","useNavigate","LoadingButton","MuiAlert","jsxDEV","_jsxDEV","Alert","forwardRef","_c","props","ref","elevation","variant","fileName","_jsxFileName","lineNumber","columnNumber","_c2","Login","_s","_data","form","setForm","username","password","user","signIn","isError","error","open","setOpen","navigate","handleClose","inputChangeHandler","e","name","value","target","prevState","submitFormHandler","preventDefault","data","component","maxWidth","children","anchorOrigin","vertical","horizontal","autoHideDuration","onClose","severity","sx","width","message","textAlign","marginTop","marginBottom","onSubmit","container","spacing","required","onChange","label","type","fullWidth","color","loading","isLoading","disabled","length","_c3","$RefreshReg$"],"sources":["/Users/daryn/Desktop/Project/Kanat_CRM/NEW_Kanat_Shops/frontend/src/Container/Login/Login.tsx"],"sourcesContent":["import { GlobalTheme } from '../..'\nimport { loginForm } from '../../interfaces/loginForm'\nimport { useSignInMutation } from '../../Store/services/auth'\nimport FormElement from '../../Components/UI/Form/FormElement'\nimport { CustomError } from '../../interfaces/errors/CustomError'\nimport { useAppSelector } from '../../Store/hooks'\nimport { getUser } from '../../Store/user/userSelectors'\nimport React, { ChangeEvent, FormEvent, useEffect, useState } from 'react'\nimport {\n  Container,\n  Avatar,\n  Typography,\n  Grid,\n  Link,\n  Box,\n  Snackbar,\n  ThemeProvider,\n} from '@mui/material'\nimport { Link as RouterLink, useNavigate } from 'react-router-dom'\nimport { LockOpen } from '@mui/icons-material'\nimport { LoadingButton } from '@mui/lab'\nimport MuiAlert, { AlertProps } from '@mui/material/Alert'\n\nconst Alert = React.forwardRef<HTMLDivElement, AlertProps>(function Alert(\n  props,\n  ref,\n) {\n  return <MuiAlert elevation={6} ref={ref} variant=\"filled\" {...props} />\n})\n\nconst Login = () => {\n  const [form, setForm] = useState<loginForm>({\n    username: '',\n    password: '',\n  })\n  const user = useAppSelector(getUser)\n  const [signIn, { isError, error }] = useSignInMutation()\n  const [open, setOpen] = useState(false)\n\n  const navigate = useNavigate()\n\n  useEffect(() => {\n    setOpen(isError)\n  }, [isError])\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const inputChangeHandler = (e: ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target\n\n    setForm((prevState) => ({\n      ...prevState,\n      [name]: value,\n    }))\n  }\n\n  const submitFormHandler = async (e: FormEvent<HTMLFormElement>) => {\n    e.preventDefault()\n    const data = await signIn(form)\n    if (!(data as { error: object }).error) {\n      setForm({\n        username: '',\n        password: '',\n      })\n      navigate('/')\n    }\n  }\n  return (\n    <Container component=\"section\" maxWidth=\"xs\">\n      <Snackbar\n        anchorOrigin={{ vertical: 'top', horizontal: 'center' }}\n        open={open}\n        autoHideDuration={3000}\n        onClose={handleClose}\n      >\n        <Alert onClose={handleClose} severity=\"error\" sx={{ width: '100%' }}>\n          {(error as CustomError)?.data?.message === 'Username not found!'\n            ? 'Логин не верный!'\n            : 'Пароль не верный!'}\n        </Alert>\n      </Snackbar>\n      <Box>\n        <Typography\n          component=\"h1\"\n          variant=\"h5\"\n          textAlign={'center'}\n          sx={{ marginTop: 1, marginBottom: 1 }}\n        >\n          Войти\n        </Typography>\n        <Box>\n          <form onSubmit={submitFormHandler}>\n            <Grid container spacing={2}>\n              <FormElement\n                required\n                value={form.username}\n                onChange={inputChangeHandler}\n                name=\"username\"\n                label=\"Имя пользователя\"\n              />\n              <FormElement\n                required\n                value={form.password}\n                onChange={inputChangeHandler}\n                type=\"password\"\n                name=\"password\"\n                label=\"Пароль\"\n              />\n            </Grid>\n            <LoadingButton\n              type=\"submit\"\n              fullWidth\n              variant=\"contained\"\n              color=\"primary\"\n              loading={user.isLoading}\n              disabled={\n                form.username.length > 0 && form.password.length > 0\n                  ? false\n                  : true\n              }\n            >\n              Войти\n            </LoadingButton>\n            <Grid container></Grid>\n          </form>\n        </Box>\n      </Box>\n    </Container>\n  )\n}\n\nexport default Login\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}