{"ast":null,"code":"var _jsxFileName = \"/Users/daryn/Desktop/Project/Kanat_CRM/NEW_Kanat_Shops/frontend/src/Container/Items/AddItems.tsx\",\n  _s = $RefreshSig$();\nimport FileUpload from '../../Components/UI/Form/FileUpload';\nimport FormElement from '../../Components/UI/Form/FormElement';\nimport { useAddItemMutation } from '../../Store/services/items';\nimport { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router';\nimport { Alert, Button, Container, FormControl, Snackbar } from '@mui/material';\nimport SuccessPopup from '../../Components/UI/SuccessPopup/SuccessPopup';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AddItem = () => {\n  _s();\n  var _data;\n  const [addItem, {\n    error,\n    isError,\n    isSuccess\n  }] = useAddItemMutation();\n  const initialFormState = {\n    item_name: '',\n    image_small: ''\n  };\n  const [openItemId, setOpenItemId] = useState(null);\n  const [form, setForm] = useState(initialFormState);\n  const [open, setOpen] = useState(false);\n  const [show, setShow] = useState(false);\n  const navigate = useNavigate();\n  const handleClose = () => {\n    setOpen(false);\n    setShow(false);\n  };\n  useEffect(() => {\n    setOpen(isError);\n    setShow(isSuccess);\n  }, [isError, isSuccess]);\n  const inputChangeHandler = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setForm(prevState => ({\n      ...prevState,\n      [name]: value\n    }));\n  };\n  const selectChangeHandler = (name, value) => {\n    setForm(prevState => ({\n      ...prevState,\n      [name]: value\n    }));\n  };\n  const fileChangeHandler = e => {\n    const name = e.target.name;\n    if (e.target.files) {\n      const file = e.target.files[0];\n      setForm(prevState => ({\n        ...prevState,\n        [name]: file\n      }));\n    }\n  };\n  const submitFormHandler = async e => {\n    e.preventDefault();\n    const formData = new FormData();\n    for (const [key, value] of Object.entries(form)) {\n      const stringValue = typeof value === 'number' ? value.toString() : value;\n      formData.append(key, stringValue);\n    }\n    const data = await addItem(formData);\n    if (!data.error) {\n      navigate('/items');\n      setForm(initialFormState);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    component: \"section\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: submitFormHandler,\n      children: [/*#__PURE__*/_jsxDEV(Snackbar, {\n        anchorOrigin: {\n          vertical: 'top',\n          horizontal: 'center'\n        },\n        open: open,\n        autoHideDuration: 3000,\n        onClose: handleClose,\n        children: /*#__PURE__*/_jsxDEV(Alert, {\n          severity: \"error\",\n          onClose: handleClose,\n          children: error === null || error === void 0 ? void 0 : (_data = error.data) === null || _data === void 0 ? void 0 : _data.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(SuccessPopup, {\n        open: show,\n        onClose: handleClose,\n        message: \"\\u0422\\u043E\\u0432\\u0430\\u0440 \\u0441\\u043E\\u0437\\u0434\\u0430\\u043D\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n        fullWidth: true,\n        children: /*#__PURE__*/_jsxDEV(FormElement, {\n          value: form.item_name,\n          label: \"\\u0422\\u043E\\u0432\\u0430\\u0440\",\n          name: \"item_name\",\n          onChange: inputChangeHandler\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FileUpload, {\n        onChange: fileChangeHandler,\n        name: \"image_small\",\n        label: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        fullWidth: true,\n        sx: {\n          maxWidth: 350\n        },\n        variant: \"contained\",\n        color: \"success\",\n        type: \"submit\",\n        className: \"submit\",\n        children: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n};\n_s(AddItem, \"FLDxyfci0gKXSZn2M+3baNomqKY=\", false, function () {\n  return [useAddItemMutation, useNavigate];\n});\n_c = AddItem;\nexport default AddItem;\nvar _c;\n$RefreshReg$(_c, \"AddItem\");","map":{"version":3,"names":["FileUpload","FormElement","useAddItemMutation","useEffect","useState","useNavigate","Alert","Button","Container","FormControl","Snackbar","SuccessPopup","jsxDEV","_jsxDEV","AddItem","_s","_data","addItem","error","isError","isSuccess","initialFormState","item_name","image_small","openItemId","setOpenItemId","form","setForm","open","setOpen","show","setShow","navigate","handleClose","inputChangeHandler","e","name","value","target","prevState","selectChangeHandler","fileChangeHandler","files","file","submitFormHandler","preventDefault","formData","FormData","key","Object","entries","stringValue","toString","append","data","component","children","onSubmit","anchorOrigin","vertical","horizontal","autoHideDuration","onClose","severity","message","fileName","_jsxFileName","lineNumber","columnNumber","fullWidth","label","onChange","sx","maxWidth","variant","color","type","className","_c","$RefreshReg$"],"sources":["/Users/daryn/Desktop/Project/Kanat_CRM/NEW_Kanat_Shops/frontend/src/Container/Items/AddItems.tsx"],"sourcesContent":["import FileUpload from '../../Components/UI/Form/FileUpload'\nimport FormElement from '../../Components/UI/Form/FormElement'\nimport { CustomError } from '../../interfaces/errors/CustomError'\nimport { useAddItemMutation } from '../../Store/services/items'\nimport { ChangeEvent, FormEvent, useEffect, useState } from 'react'\nimport { useNavigate } from 'react-router'\nimport { Alert, Button, Container, FormControl, Snackbar } from '@mui/material'\nimport SuccessPopup from '../../Components/UI/SuccessPopup/SuccessPopup'\n\nconst AddItem = () => {\n  const [addItem, { error, isError, isSuccess }] = useAddItemMutation()\n  interface Props {\n    item_name: string\n    image_small: string\n  }\n  const initialFormState: Props = {\n    item_name: '',\n    image_small: '',\n  }\n\n  const [openItemId, setOpenItemId] = useState<number | null>(null)\n\n  const [form, setForm] = useState(initialFormState)\n  const [open, setOpen] = useState(false)\n  const [show, setShow] = useState(false)\n\n  const navigate = useNavigate()\n\n  const handleClose = () => {\n    setOpen(false)\n    setShow(false)\n  }\n\n  useEffect(() => {\n    setOpen(isError)\n    setShow(isSuccess)\n  }, [isError, isSuccess])\n\n  const inputChangeHandler = (e: ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target\n\n    setForm((prevState) => ({\n      ...prevState,\n      [name]: value,\n    }))\n  }\n  const selectChangeHandler = (name: string, value: string) => {\n    setForm((prevState) => ({\n      ...prevState,\n      [name]: value,\n    }))\n  }\n  const fileChangeHandler = (e: ChangeEvent<HTMLInputElement>) => {\n    const name = e.target.name\n    if (e.target.files) {\n      const file = e.target.files[0]\n      setForm((prevState) => ({\n        ...prevState,\n        [name]: file,\n      }))\n    }\n  }\n\n  const submitFormHandler = async (e: FormEvent<HTMLFormElement>) => {\n    e.preventDefault()\n    const formData = new FormData()\n\n    for (const [key, value] of Object.entries(form)) {\n      const stringValue = typeof value === 'number' ? value.toString() : value\n      formData.append(key, stringValue)\n    }\n    const data = await addItem(formData)\n    if (!((data as unknown) as { error: object }).error) {\n      navigate('/items')\n      setForm(initialFormState)\n    }\n  }\n\n  return (\n    <Container component=\"section\">\n      <form onSubmit={submitFormHandler}>\n        <Snackbar\n          anchorOrigin={{ vertical: 'top', horizontal: 'center' }}\n          open={open}\n          autoHideDuration={3000}\n          onClose={handleClose}\n        >\n          <Alert severity=\"error\" onClose={handleClose}>\n            {(error as CustomError)?.data?.message}\n          </Alert>\n        </Snackbar>\n        <SuccessPopup\n          open={show}\n          onClose={handleClose}\n          message=\"Товар создан\"\n        />\n        <FormControl fullWidth>\n          <FormElement\n            value={form.item_name}\n            label=\"Товар\"\n            name=\"item_name\"\n            onChange={inputChangeHandler}\n          />\n        </FormControl>\n        <FileUpload onChange={fileChangeHandler} name=\"image_small\" label=\"\" />\n        <Button\n          fullWidth\n          sx={{ maxWidth: 350 }}\n          variant=\"contained\"\n          color=\"success\"\n          type=\"submit\"\n          className=\"submit\"\n        >\n          Добавить\n        </Button>\n      </form>\n    </Container>\n  )\n}\nexport default AddItem\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}